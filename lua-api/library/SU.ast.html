<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>SILE</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Library</h2>
<ul class="nowrap">
  <li><a href="../library/SILE.html">SILE</a></li>
  <li><a href="../library/SILE.font.html">SILE.font</a></li>
  <li><a href="../library/SILE.settings.html">SILE.settings</a></li>
  <li><a href="../library/SILE.types.node.html">SILE.types.node</a></li>
  <li><a href="../library/SU.html">SU</a></li>
  <li><strong>SU.ast</strong></li>
  <li><a href="../library/SU.numbers.html">SU.numbers</a></li>
  <li><a href="../library/SU.sorting.html">SU.sorting</a></li>
  <li><a href="../library/globals.html">globals</a></li>
  <li><a href="../library/loaders.html">loaders</a></li>
  <li><a href="../library/packages.bibtex.csl.engine.html">packages.bibtex.csl.engine</a></li>
  <li><a href="../library/packages.bibtex.csl.locale.html">packages.bibtex.csl.locale</a></li>
  <li><a href="../library/packages.bibtex.csl.style.html">packages.bibtex.csl.style</a></li>
  <li><a href="../library/packages.bibtex.csl.utils.casing.html">packages.bibtex.csl.utils.casing</a></li>
  <li><a href="../library/packages.bibtex.csl.utils.superfolding.html">packages.bibtex.csl.utils.superfolding</a></li>
  <li><a href="../library/packages.bibtex.csl.utils.xmlparser.html">packages.bibtex.csl.utils.xmlparser</a></li>
  <li><a href="../library/packages.bibtex.support.bib2csl.html">packages.bibtex.support.bib2csl</a></li>
  <li><a href="../library/packages.bibtex.support.isodatetime.html">packages.bibtex.support.isodatetime</a></li>
  <li><a href="../library/packages.bibtex.support.locators.html">packages.bibtex.support.locators</a></li>
  <li><a href="../library/packages.math.mathml-entities.html">packages.math.mathml-entities</a></li>
  <li><a href="../library/packages.math.unicode-symbols.html">packages.math.unicode-symbols</a></li>
</ul>
<h2>Interfaces</h2>
<ul class="nowrap">
  <li><a href="../interfaces/classes.html">classes</a></li>
  <li><a href="../interfaces/inputters.html">inputters</a></li>
  <li><a href="../interfaces/languages.html">languages</a></li>
  <li><a href="../interfaces/outputters.html">outputters</a></li>
  <li><a href="../interfaces/packages.html">packages</a></li>
  <li><a href="../interfaces/pagebuilders.html">pagebuilders</a></li>
  <li><a href="../interfaces/shapers.html">shapers</a></li>
  <li><a href="../interfaces/typesetters.html">typesetters</a></li>
</ul>
<h2>Types</h2>
<ul class="nowrap">
  <li><a href="../types/color.html">color</a></li>
  <li><a href="../types/length.html">length</a></li>
  <li><a href="../types/measurement.html">measurement</a></li>
  <li><a href="../types/unit.html">unit</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/classes.bible.html">classes.bible</a></li>
  <li><a href="../modules/classes.book.html">classes.book</a></li>
  <li><a href="../modules/classes.diglot.html">classes.diglot</a></li>
  <li><a href="../modules/classes.docbook.html">classes.docbook</a></li>
  <li><a href="../modules/classes.jbook.html">classes.jbook</a></li>
  <li><a href="../modules/classes.jplain.html">classes.jplain</a></li>
  <li><a href="../modules/classes.letter.html">classes.letter</a></li>
  <li><a href="../modules/classes.plain.html">classes.plain</a></li>
  <li><a href="../modules/classes.tbook.html">classes.tbook</a></li>
  <li><a href="../modules/classes.tbook.html">classes.tbook</a></li>
  <li><a href="../modules/classes.tplain.html">classes.tplain</a></li>
  <li><a href="../modules/classes.triglot.html">classes.triglot</a></li>
  <li><a href="../modules/packages.pdf.html">packages.pdf</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/README.md.html">README</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>SU.ast</code></h1>
<p>AST utilities.</p>
<p> Functions for working with SILE's Abstract Syntax Trees.</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#debug">debug(tree, level)</a></td>
	<td class="summary">Output developer friendly debugging view of an AST.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#findInTree">findInTree(tree, command)</a></td>
	<td class="summary">Find a command node in a SILE AST tree,
 looking only at the first level.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#removeFromTree">removeFromTree(tree, command)</a></td>
	<td class="summary">Find and extract (remove) a command node in a SILE AST tree,
 looking only at the first level.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#createCommand">createCommand(command, options, content, position)</a></td>
	<td class="summary">Create a command from a simple content tree.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#createStructuredCommand">createStructuredCommand(command, options, content, position)</a></td>
	<td class="summary">Create a command from a structured content tree.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#subContent">subContent(content)</a></td>
	<td class="summary">Extract the sub-content tree from a (command) node,
 that is the child nodes of the (command) node.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#trimSubContent">trimSubContent(content)</a></td>
	<td class="summary">Content tree trimming: remove leading and trailing spaces, but from
 a content tree i.e.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#processAsStructure">processAsStructure(content)</a></td>
	<td class="summary">Process the AST walking through content nodes as a "structure":
 Text nodes are ignored (e.g.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#walkContent">walkContent(content, action)</a></td>
	<td class="summary">Call <code>action</code> on each content AST node, recursively, including <code>content</code> itself.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#stripContentPos">stripContentPos(table)</a></td>
	<td class="summary">Strip position, line and column recursively from a content tree.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#contentToString">contentToString(content)</a></td>
	<td class="summary">Flatten content trees into just the string components (allows passing
 objects with complex structures to functions that need plain strings)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#hasContent">hasContent(content)</a></td>
	<td class="summary">Check whether a content AST tree is empty.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "debug"></a>
    <strong>debug(tree, level)</strong>
    </dt>
    <dd>
    Output developer friendly debugging view of an AST.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tree</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         Abstract Syntax Tree.
        </li>
        <li><span class="parameter">level</span>
            <span class="types"><span class="type">integer</span></span>
         Starting level to review.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "findInTree"></a>
    <strong>findInTree(tree, command)</strong>
    </dt>
    <dd>
    Find a command node in a SILE AST tree,
 looking only at the first level.
 (We're not reimplementing XPath here.)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tree</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>
         command name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a> or <span class="type">nil</span></span>
        AST command node
    </ol>




</dd>
    <dt>
    <a name = "removeFromTree"></a>
    <strong>removeFromTree(tree, command)</strong>
    </dt>
    <dd>
    Find and extract (remove) a command node in a SILE AST tree,
 looking only at the first level.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tree</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>
         command name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a> or <span class="type">nil</span></span>
        AST command node
    </ol>




</dd>
    <dt>
    <a name = "createCommand"></a>
    <strong>createCommand(command, options, content, position)</strong>
    </dt>
    <dd>
    Create a command from a simple content tree.
 It encapsulates the content in a command node.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>
         command name
        </li>
        <li><span class="parameter">options</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         command options
        </li>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         child AST tree
        </li>
        <li><span class="parameter">position</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         position in source (or parent AST command node)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        AST command node
    </ol>




</dd>
    <dt>
    <a name = "createStructuredCommand"></a>
    <strong>createStructuredCommand(command, options, content, position)</strong>
    </dt>
    <dd>
    Create a command from a structured content tree.
 The content is normally a table of an already prepared content list.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>
         command name
        </li>
        <li><span class="parameter">options</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         command options
        </li>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         child AST tree
        </li>
        <li><span class="parameter">position</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         position in source (or parent AST command node)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        AST command node
    </ol>




</dd>
    <dt>
    <a name = "subContent"></a>
    <strong>subContent(content)</strong>
    </dt>
    <dd>
    Extract the sub-content tree from a (command) node,
 that is the child nodes of the (command) node.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        AST tree
    </ol>




</dd>
    <dt>
    <a name = "trimSubContent"></a>
    <strong>trimSubContent(content)</strong>
    </dt>
    <dd>
    Content tree trimming: remove leading and trailing spaces, but from
 a content tree i.e.  possibly containing several elements.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        AST tree
    </ol>




</dd>
    <dt>
    <a name = "processAsStructure"></a>
    <strong>processAsStructure(content)</strong>
    </dt>
    <dd>
    Process the AST walking through content nodes as a "structure":
 Text nodes are ignored (e.g.  usually just spaces due to indentation)
 Command options are enriched with their "true" node position, so we can later
 refer to it (as with an XPath pos()).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
    </ul>





</dd>
    <dt>
    <a name = "walkContent"></a>
    <strong>walkContent(content, action)</strong>
    </dt>
    <dd>
    Call <code>action</code> on each content AST node, recursively, including <code>content</code> itself.
 Not called on leaves, i.e. strings.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
        <li><span class="parameter">action</span>
            <span class="types"><span class="type">function</span></span>
         A function to call on each node
        </li>
    </ul>





</dd>
    <dt>
    <a name = "stripContentPos"></a>
    <strong>stripContentPos(table)</strong>
    </dt>
    <dd>
    Strip position, line and column recursively from a content tree.
 This can be used to remove position details where we do not want them,
 e.g. in table of contents entries (referring to the original content,
 regardless where it was exactly, for the purpose of checking whether
 the table of contents changed.)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">table</span>
         content AST tree
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
        AST tree
    </ol>




</dd>
    <dt>
    <a name = "contentToString"></a>
    <strong>contentToString(content)</strong>
    </dt>
    <dd>
    Flatten content trees into just the string components (allows passing
 objects with complex structures to functions that need plain strings)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>
        A string representation of content
    </ol>




</dd>
    <dt>
    <a name = "hasContent"></a>
    <strong>hasContent(content)</strong>
    </dt>
    <dd>
    Check whether a content AST tree is empty.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">content</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.2/manual.html#6.5">table</a></span>
         AST tree
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        true if content is not empty
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 1980-01-01 00:00:00 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
